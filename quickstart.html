<!DOCTYPE HTML>
<!--
	Typify by TEMPLATED
	templated.co @templatedco
	Released for free under the Creative Commons Attribution 3.0 license (templated.co/license)
-->
<html>
	<head>
		<title>PriDE 3 - Quickstart</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<!--[if lte IE 8]><script src="assets/js/ie/html5shiv.js"></script><![endif]-->
		<link rel="stylesheet" href="assets/css/main.css" />
		<!--[if lte IE 9]><link rel="stylesheet" href="assets/css/ie9.css" /><![endif]-->
	</head>
	<body>
	
		<div class="subpage-menu">
			<a href="index.html"><i class="fa fa-home"></i> Home</a>
		</div>
	
		<!-- Three -->
			<section id="three" class="wrapper">
				<div class="inner">
					<h1 id="content">PriDE Quickstart</h1>
					<hr class="major" />

					<h2>Up and working in 15 minutes</h2>
						This short tutorial allows a quick introduction into the general working principles of PriDE, based on a simple example. It takes less than 15 minutes to set up a
						primitive PriDE application which allows to perform basic operations on a simple database table. The directory examples/quickstart contains the complete source code
						f√ºr the tutorial example.<br>
						Setting up an application includes the following steps:
						<ul>
							<li>Preparing the environment
							<li>Database configuration
							<li>Writing or generating entity classes
							<li>Writing application classes
							<li>Calling the application
						</ul>
						I.e. there's only 3 minutes time for each step now, so let's hurry up ;-)
						<p>
						
					<h2>Preparing the environment</h2>
						Working with PriDE requires to add the library pride.jar into the CLASSPATH of the working environment, as well as the JDBC driver of the database to access. E.g. in
						case of a MySQL 6 database this is the library mysql-connector-java-6.0.6.jar, for Oracle 11 the library ojdbc8.jar, and for HSQL 2.x the library hsqldb-2.x.y.jar. The
						ultry light in-memory database HSQL is the best choice for first experiments. Driver, database URL, database user, and password are supposed to be provided as system
						properties in all PriDE introduction examples. For HSQL and its default database, the properties look like this:
						<p>
						<pre><code>pride.driver=org.hsqldb.jdbc.JDBCDriver
pride.db=jdbc:hsqldb:test
pride.user=sa
pride.password=root
pride.dbtype=hsql
pride.logfile=sql.log
</code></pre>
						
					<h2>Database design</h2>
						In the next step, the required database tables must be created. PriDE does
						not provide its own tool for that but assumes one being included in the
						database installation. If nothing appropriate is available, their are free tools
						available for that, e.g. <a href="https://www.dbdesigner.net/">DB Designer</a> online tool which supports
						various common databases. The tutorial examples uses a database
						table according to the following definition:
						<p>
						<pre><code>create table CUSTOMER (
	id integer not null primary key,
	name varchar(20),
	first_name varchar(30)
);</code></pre>
						
					<h2>Writing or generating entity classes</h2>
						Accessing a table via PriDE requires a corresponding entity class (usually a simple Java Bean) and a mapping descriptor object.
						1:1 mappings of a database table to a Java class can be generated with a code generator provided with PriDE. For the table
						CUSTOMER above, the source code for an entity class Customer.java and an incorporated descriptor can be generated by the following call:
						<p>
						<pre><code>pm.pride.util.generator.EntityGenerator CUSTOMER quickstart.Customer > Customer.java</code></pre>
						<p>
						Note that you may also generate the descriptive parts in a separate class to keep the entity bean class free from database aspects.
						For the tutorial example under examples/quickstart we generate a hybrid class which looks like this:
						<p>
						<pre><code>package quickstart;

public class Customer extends MappedObject implements Cloneable, java.io.Serializable {
    public static final String TABLE = "CUSTOMER";
    public static final String COL_ID = "id";
    public static final String COL_NAME = "name";
    public static final String COL_FIRST_NAME = "first_name";

    protected static final RecordDescriptor red = new RecordDescriptor
        (Customer.class, "CUSTOMER", null, new String[][] {
            { COL_ID,   "getId",   "setId" },
            { COL_NAME,   "getName",   "setName" },
            { COL_FIRST_NAME,   "getFirstName",   "setFirstName" },
        });

    protected RecordDescriptor getDescriptor() { return red; }

    private static String[] keyFields = new String[] { "id" };
    public String[] getKeyFields() { return keyFields; }

    private long id;
    private String name;
    private String firstName;

    public long getId()   { return id; }
    public String getName()   { return name; }
    public String getFirstName()   { return firstName; }

    public void setId(long id) { this.id = id; }
    public void setName(String name) { this.name = name; }
    public void setFirstName(String firstName) { this.firstName = firstName; }

    // Reconstructor
    public Customer(long id) throws SQLException {
        setId(id);
        find();
    }

}
</code></pre>
						<p>

					<h2>Writing application classes</h2>
						Based on the entity classes, the actual application can be designed. First of all the PriDE runtime library must be initialized by a so-called "resource accessor".
						A JSE application requires only a single line of code for an initialization based on system properties:
						<p>
						<pre><code>ResourceAccessorJSE.fromSystemProperties();
</code></pre>
						<p>

						The actual database operations are performed by invoking corresponding member functions of the entity classes, e.g.
						<p>
						<pre><code>public void create(int id, String name, String firstName)
    throws SQLException {
    Customer c = new Customer(id, name, firstName);
    c.create();
}

public void update(int id, String name, String firstName)
    throws SQLException {
    Customer c = new Customer(id, name, firstName);
    c.update();
}

public void queryByName( String name )
	throws SQLException {
	Customer c = new Customer(0, name, null);
	ResultIterator ri = c.query(COL_NAME);
	if (ri != null) {
		do {
			System.out.println(c.getId() + ": " + c.getName() + "," + c.getFirstName());
		} while(ri.next());
	}
}</code></pre>
						<p>

						The tutorial example under examples/quickstart includes the file CustomerClient.java, providing an interactive test client.
						Calling the application

						The PriDE initialization above is based on system properties which must be passed in the application invokation. E.g. calling the interactive test client for a local MySQL 4 test database might look like this:
						<p>
						<pre><code>java -Dpride.driver=com.mysql.jdbc.Driver -Dpride.db=jdbc:mysql://localhost/test quickstart.CustomerClient</code></pre>
						<p>

						That's it!<br>
						The tutorial example already illustrates the most important basic principles of PriDE. To understand what's going on behind the scenes of the 5 steps above, it is recommended to carry on with the detailed introduction chapter.
				</div>
			</section>

		<!-- Footer -->
			<footer id="footer">
				<div class="copyright">
					legal notice
				</div>
			</footer>

		<!-- Scripts -->
			<script src="assets/js/jquery.min.js"></script>
			<script src="assets/js/skel.min.js"></script>
			<script src="assets/js/util.js"></script>
			<!--[if lte IE 8]><script src="assets/js/ie/respond.min.js"></script><![endif]-->
			<script src="assets/js/main.js"></script>

	</body>
</html>